# Инструкция по запуску тестов.

Помимо тестов на корректные выходные данные система автотестирования будет
проверять вашу программу и ее исходный код по следующим пунктам:

* **Стилевые тесты.** Чтобы проверить, насколько красота вашего кода соответствует
  стандартам, вы можете протестировать ваш код с помощью скрипта ```materials/linters/cpplint.py```. В папке ```materials/linters``` также лежит файл ```CPPLINT.cfg```, который содержит необходимые фильтры-настройки для стилевого теста. Скрипт работает таким образом, что данный конфигурационный файл распространяет свое действие на все файлы, которые лежат с ним в директории или в директориях ниже. Поэтому, чтобы данные настройки применились к вашим файлам с исходным кодом, скопируйте ```CPPLINT.cfg``` в папку src. \
  \
  Чтобы запустить скрипт, выполните следующую команду: \
  ```python3 materials/linters/cpplint.py --extensions=c src/sourcefile_name.c``` \
  \
  Важно! Для запуска вам необходим python версии 3. Проверить установленную на
  компьютере версию можно с помощью команды ```python3 --version```  
  Чтобы скачать python3, введите в терминал одну из следующих команд: \
  ```brew install python3``` \
  или, если у вас есть root-права (для Ubuntu / Linux Mint / Debian) \
  ```sudo apt install python3```


* **Тест на корректную работу с памятью.** При написании C-программ очень важно следить за утечками памяти. Для этого в Unix-подобных операционных системах довольно часто используют утилиту _valgrind_. Однако, на OS X имеются проблемы с поддержкой valgrind, поэтому вместо нее можно использовать утилиту _leaks_. Вдаваться в механизм работы этих утилит мы сейчас не будем - если интересно, можете почитать в гугле.
  
  Чтобы запустить ваш исполняемый файл с помощью этой утилиты, наберите в терминале: \
  ```leaks -atExit -- ./main.out | grep LEAK:```
  
  Обратите внимание на команду ```| grep LEAK:```. Мы используем ее для короткого вывода, чтобы видеть только линии с утечками, если они есть. Если вы хотите увидеть весь вывод, просто удалите эту команду. 

  При запуске исполняемого файла с помощью _leaks_ может появиться сообщение об ошибке:
  >dyld: could not load inserted library ‘/usr/local/lib/libLeaksAtExit.dylib’ because image not found
  
  Ошибка возникает из-за того, что _leaks_ не может найти библиотеку _libLeaksAtExit.dylib_. \
  В этом случае вам необходимо ввести следующие команды:
  ```sh
  cd /usr/local/lib  
  sudo ln -s /Applications/Xcode.app/Contents/Developer/usr/lib/libLeaksAtExit.dylib
  ```

  _Дополнительно:_ \
  Используйте флаг ```-exclude``` утилиты _leaks_ для того, чтобы отфильтровать утечки в функциях, где известно об утечках памяти. Этот флаг позволяет уменьшить количество посторонней информации, сообщаемой _leaks_.
  
